<html>
<head>
    <title>Alfred | Dominic Joseph</title>
    <link rel="icon" type="image/png" href="./views/img/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./css/alfred.css">
</head>
<body>
    <div id="headericon">
        <a href="../">
            <img src="http://www.dominicpjoseph.com/views/img/insignia.png">
        </a>
    </div>
    <div id="chatbubble">
        This is Alfred. He doesn't do too amazingly much and I think there's always room for growth, but as of right now, he takes certain commands and responds to certain buzzwords. I originally made him to be used on GroupMe conversations.<br><strong>To see what he can do, just type, "Alfred, help." in the box below and press Enter!</strong><br>
    </div>
    <form id="send">
        <input id="inputbox" autofocus="autofocus" placeholder="Enter commands here!">
    </form>

<script>
    $('#send').submit(function (event) {
        var message = $('#inputbox').val();
        $('#chatbubble').html($('#chatbubble').html() + '<span style="color:green;">You: </span>' + $('#inputbox').val() + '<br>');
        $('#chatbubble')[0].scrollTop = $('#chatbubble')[0].scrollHeight;
        $('#inputbox').val('');
        event.preventDefault();

        $.ajax({
            type:'POST',
            url:'http://domgrouptron.herokuapp.com',
            contentType:"application/x-www-form-urlencoded",
            dataType:'text',
            data: {
                group_id:'shakirashakira',
                text: message,
                name: 'friend'
            },
            success:function (reply) {
                if (!reply) return;
                reply = reply.replace(/\n/g, '<br>');
                if (reply.match('http')) {
                    reply = '<a href="' + reply + '" target="_blank">' + reply + '</a>';
                }

                $('#chatbubble').html($('#chatbubble').html() + '<span style="color:red;">Alfred: </span>' + reply + '<br>');
                $('#chatbubble')[0].scrollTop = $('#chatbubble')[0].scrollHeight;
            }
        });
    });

    $(document).ready(function () {

    });
</script>

</body>
</html>